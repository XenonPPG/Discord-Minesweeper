import{i as F,r as y,o as H,c as S,w as z,a as J,b as h,d as g,e as t,f as K,g as P,n as L,h as Z,j as ne,p as M,_ as I,t as A,k,l as N,m as oe,q as x,u as v,s as C,v as W,x as se,F as Y,y as j,z as U,A as V,B as E,C as ie,D as ae,E as X,G as ue,H as D}from"./index-B3zCDRoD.js";const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAFtJREFUKFO9UlsKACAIy/sf2jCylg1KgvpKcY+WUvajpCfYw6INK4HInGo3L5UNR8UOHhxp0AIwGlRltdm7UnGrRvIOilaQ3S1TJYh3hBff+Ddyt5HeCPz84+5V0P8tCTG36J0AAAAASUVORK5CYII=",de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAF9JREFUKFOdUtESABAIy/9/NFcntxiiF6ymjYrEqCJSJkyPAceCCpkj7kkjeHRQF4ovCSTiRYjTTsSTQa5g0X4jAHmUBg/EI3a0PSUw4renraSn18v8k8t+nohBzMxeA6YZJAwFnYEJAAAAAElFTkSuQmCC",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAD5JREFUKFNjZCADMKLp+U/ADLB6bJrQxWDmgAzE0ITPFpBinJqw2QJTPKoJGtQkBwQsrkiOJ3hiwRX7eFMTAD3KGg4GMgioAAAAAElFTkSuQmCC",ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAFVJREFUKFNjZMAK/v+HCDMyokujCcAUYiiDq0PSgFCM3XyIbVANqCbjcRDMjbicguk0RgYGTMW4bQA7iWQNIGsp9AMRnka1hYhghYUGSRGHHIS4HQUAfzImCWFzu1gAAAAASUVORK5CYII=",Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAFhJREFUKFOlUlsOACAI0vsfumabDV+trE+CQJKpcbjQDMADBwElCuZFeEeZ6BR48b115WC4KkKyOvmYG89EWTkmwZeTWj/NJKJsLt9kaK/1T/jq9UZcb+EEUe0UDiIS/lQAAAAASUVORK5CYII=",ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAFtJREFUKFOdUlsOACAIwvsf2lbLZj5a2lczEDAJjUMRhwGWOgEOcwoCnCBL0m+zmSO93IrqJZ0p7O4Huy4arLNkdUeKglsHfSWxVMqU5bKTdNNr/ZPu+r0RlRUcylIoDlFS1igAAAAASUVORK5CYII=",G={__name:"Collapsible",props:{open:{type:Boolean,default:!1}},setup(o){const e=o,s=F("registerCollapsible",null),n=F("unregisterCollapsible",null),a=F("openIndex",null),r=F("toggleIndex",null),f=y(null),l=y("0px"),i=y("0px");let c=null;s&&(c=s(),H(()=>n&&n(c)));const _=S(()=>a!==null&&c!==null),m=y(e.open),u=S(()=>_.value?a.value===c:m.value);async function p(d){await ne(),d&&f.value?(l.value=`${f.value.scrollWidth}px`,i.value=`${f.value.scrollHeight}px`):(l.value="0px",i.value="0px")}function w(){_.value?r&&r(c):(m.value=!m.value,p(m.value))}return z(u,d=>p(d)),J(()=>{_.value?e.open&&r&&r(c):m.value&&p(!0)}),(d,b)=>(g(),h("div",{class:Z(["cell collapsible",{"is-closed":!u.value}]),onClick:b[1]||(b[1]=$=>!u.value&&w())},[t("button",{class:"collapsible-button",onClick:b[0]||(b[0]=P($=>w(),["stop"]))},[K(d.$slots,"button")]),t("div",{ref_key:"contentRef",ref:f,class:"content",style:L({width:l.value,height:i.value})},[K(d.$slots,"content")],4)],2))}},ve={__name:"CollapsibleGroup",setup(o){const e=y(null),s=y([]);function n(){const r=s.value.length;return s.value.push(r),r}function a(r){const f=s.value.indexOf(r);f>-1&&s.value.splice(f,1)}return M("openIndex",e),M("toggleIndex",r=>{e.value=e.value===r?null:r}),M("registerCollapsible",n),M("unregisterCollapsible",a),(r,f)=>(g(),h("div",null,[K(r.$slots,"default")]))}},fe={},me={class:"info"},pe={style:{"text-align":"start"}},ge={style:{"text-align":"start"}},he={style:{"text-align":"start"}};function be(o,e){return g(),h("div",me,[t("h2",null,A(o.$t("info.header")),1),t("h3",null,A(o.$t("info.play.title")),1),t("div",pe,[t("p",null,A(o.$t("info.play.content")),1)]),t("h3",null,A(o.$t("info.draw.title")),1),t("div",ge,[t("p",null,A(o.$t("info.draw.content.part_1")),1),t("p",null,[k(A(o.$t("info.draw.content.part_2.1"))+" ",1),t("i",null,[k(A(o.$t("info.draw.content.part_2.2"))+" ",1),e[0]||(e[0]=t("img",{src:ee,class:"pixel-art icon",style:{animation:"3s rotation linear infinite"}},null,-1))]),k(" "+A(o.$t("info.draw.content.part_2.3"))+" ",1),t("i",null,A(o.$t("info.draw.content.part_2.4")),1),k(", "+A(o.$t("info.draw.content.part_2.5")),1)])]),t("h3",null,A(o.$t("info.discord.title")),1),t("div",he,[t("p",null,[k(A(o.$t("info.discord.content.1")),1),e[1]||(e[1]=t("img",{src:q,class:"pixel-art icon"},null,-1)),k(" "+A(o.$t("info.discord.content.2")),1)])])])}const ye=I(fe,[["render",be]]),B=N({__name:"HoldButton",props:{holdDelay:{type:Number,default:200},initialInterval:{type:Number,default:200},acceleration:{type:Number,default:1.25}},emits:["click"],setup(o,{emit:e}){const s=o,n=e;let a=null,r=s.initialInterval;function f(){a!==null&&(clearTimeout(a),a=null)}function l(){n("click"),r=s.initialInterval,a=window.setTimeout(i,s.holdDelay)}function i(){n("click"),r=Math.max(50,r/s.acceleration),a=window.setTimeout(i,r)}function c(){f()}return H(()=>{c()}),(_,m)=>(g(),h("button",{onPointerdown:P(l,["prevent"]),onPointerup:c,onPointerleave:c},[K(_.$slots,"default")],32))}}),we={class:"flex flex-column"},_e={for:"input"},xe={class:"flex"},$e=["min","max","value"],ke=N({__name:"NumberInput",props:{modelValue:{type:Number,default:0},label:String,min:{type:[Number,Function],default:null},max:{type:[Number,Function],default:null}},emits:["update:modelValue"],setup(o,{emit:e}){const s=o,n=e,{modelValue:a,min:r,max:f}=oe(s),l=S(()=>typeof r.value=="function"?r.value():r.value),i=S(()=>typeof f.value=="function"?f.value():f.value),c=y(null);function _(){c.value=a.value}function m(w){const d=w.target,b=d.value;if(b===""){d.value="";return}let $=Number(b);l.value!=null&&$<l.value&&($=l.value),i.value!=null&&$>i.value&&($=i.value),n("update:modelValue",$),d.value=String($)}function u(w){const d=w.target;if(d.value===""){const b=c.value!=null?c.value:l.value!=null?l.value:0;n("update:modelValue",b),d.value=String(b)}}function p(w){let d=a.value+w;l.value!=null&&d<l.value&&(d=l.value),i.value!=null&&d>i.value&&(d=i.value),n("update:modelValue",d)}return(w,d)=>(g(),h("div",we,[t("label",_e,A(w.label),1),t("div",xe,[t("input",{id:"input",type:"number",min:l.value,max:i.value,value:v(a),onFocus:_,onInput:m,onBlur:u,class:"cell-inverted input"},null,40,$e),x(B,{class:"cell cell-button",onClick:d[0]||(d[0]=b=>p(-1)),disabled:l.value!=null&&v(a)<=l.value},{default:C(()=>d[2]||(d[2]=[k("-")])),_:1},8,["disabled"]),x(B,{class:"cell cell-button",onClick:d[1]||(d[1]=b=>p(1)),disabled:i.value!=null&&v(a)>=i.value},{default:C(()=>d[3]||(d[3]=[k("+")])),_:1},8,["disabled"])])]))}}),Q=I(ke,[["__scopeId","data-v-3020d251"]]),T=W("minesweeper",()=>{const o=y(9),e=y(9),s=y(16),n=se([]);let a=!1;function r(){n.splice(0,n.length);for(let u=0;u<e.value;u++)n.push(Array(o.value).fill(0))}function f(u,p){return u===0&&p===0||u===0&&p===e.value-1||u===o.value-1&&p===0||u===o.value-1&&p===e.value-1}function l(){const u=o.value*e.value,p=u>=9;let w=Math.min(s.value,u-(p?4:0));for(;w>0;){const d=Math.floor(Math.random()*o.value),b=Math.floor(Math.random()*e.value),$=!p||!f(d,b),R=n[b][d]!==-1;$&&R&&(n[b][d]=-1,w--)}}function i(u,p){let w=0;for(let d=-1;d<=1;d++)for(let b=-1;b<=1;b++){if(b===0&&d===0)continue;const $=p+d,R=u+b;$>=0&&$<e.value&&R>=0&&R<o.value&&n[$][R]===-1&&w++}return w}function c(){for(let u=0;u<e.value;u++)for(let p=0;p<o.value;p++)n[u][p]!==-1&&(n[u][p]=i(p,u))}function _(u,p){a=!0;var w=n[p][u]==-1;s.value+=w?-1:1,n[p][u]=w?1:-1,c()}function m(){a||(r(),l()),a=!1,c()}return{width:o,height:e,mines:s,field:n,reloadField:m,toggleMine:_}}),le=W("default",()=>({noAcceleration:{holdDelay:300,acceleration:1,initialInterval:100}})),O=W("additional",()=>{const o=y(!0),e=y(!0),s=y(!1),n=y(!1);return{additionalText:o,fieldVisible:e,noSpoilers:s,drawingMode:n}}),Ce={class:"settings"},Se={class:"flex",style:{"text-align":"start"}},Ue={class:"secondary"},Ie={class:"secondary"},Re={style:{"text-align":"start"}},Ee={class:"secondary"},Ne={class:"secondary"},Fe={class:"flex"},Me=N({__name:"GameSettings",setup(o){const e=T();O();const s=le(),n=S(r),a=[{name:"ðŸŒ¸",percentage:15},{name:"ðŸ˜Ž",percentage:20},{name:"ðŸ’€",percentage:35}];function r(){var l=e.width*e.height;return l<9?l:Math.max(l-4,1)}function f(l){var i=e.mines;e.mines=Math.round(e.width*e.height/100*l),i==e.mines&&e.reloadField()}return(l,i)=>(g(),h("div",Ce,[t("h3",null,A(l.$t("gs.header")),1),t("div",Se,[t("fieldset",null,[t("legend",Ue,A(l.$t("gs.size.title")),1),x(Q,{min:1,max:9,label:l.$t("gs.size.width"),modelValue:v(e).width,"onUpdate:modelValue":i[0]||(i[0]=c=>v(e).width=c)},null,8,["label","modelValue"]),x(Q,{min:1,max:9,label:l.$t("gs.size.height"),modelValue:v(e).height,"onUpdate:modelValue":i[1]||(i[1]=c=>v(e).height=c)},null,8,["label","modelValue"]),t("p",Ie,A(l.$t("gs.size.cells"))+": "+A(v(e).width*v(e).height),1)]),t("fieldset",Re,[t("legend",Ee,A(l.$t("gs.mines.title")),1),x(Q,{id:"mine-input",min:0,max:n.value,modelValue:v(e).mines,"onUpdate:modelValue":i[2]||(i[2]=c=>v(e).mines=c),label:l.$t("gs.mines.amount")},null,8,["max","modelValue","label"]),t("p",Ne,"("+A(v(e).mines)+"/"+A(n.value)+")",1),t("div",Fe,[(g(),h(Y,null,j(a,c=>x(B,{"hold-delay":v(s).noAcceleration.holdDelay,acceleration:v(s).noAcceleration.acceleration,"initial-interval":v(s).noAcceleration.initialInterval,key:c.name,onClick:_=>f(c.percentage),class:"cell cell-button"},{default:C(()=>[k(A(c.name),1)]),_:2},1032,["hold-delay","acceleration","initial-interval","onClick"])),64))])])])]))}}),Ve=I(Me,[["__scopeId","data-v-0c28d67f"]]),De={id:"additional-settings"},Ke={class:"flex-column",style:{"text-align":"start"}},Be={class:"flex"},Je={for:"reveal-field-discord-checkbox"},Te={class:"flex"},Oe={for:"additional-text-checkbox"},Ge={class:"secondary"},Qe={class:"flex"},Ye={for:"reveal-field-checkbox"},je={class:"flex"},He={for:"reveal-field-discord-checkbox"},ze={class:"secondary"},Le={__name:"AdditionalSettings",setup(o){const e=O();return(s,n)=>(g(),h("div",De,[t("h3",null,A(s.$t("as.header")),1),t("div",Ke,[t("div",null,[t("div",Be,[U(t("input",{type:"checkbox",id:"reveal-field-discord-checkbox",class:"checkbox","onUpdate:modelValue":n[0]||(n[0]=a=>v(e).drawingMode=a)},null,512),[[V,v(e).drawingMode]]),t("label",Je,A(s.$t("as.draw")),1)]),t("div",Te,[U(t("input",{type:"checkbox",id:"additional-text-checkbox",class:"checkbox","onUpdate:modelValue":n[1]||(n[1]=a=>v(e).additionalText=a)},null,512),[[V,v(e).additionalText]]),t("label",Oe,[k(A(s.$t("as.additional_text.primary")),1),n[4]||(n[4]=t("br",null,null,-1)),t("span",Ge,A(s.$t("as.additional_text.secondary")),1)])]),t("div",Qe,[U(t("input",{type:"checkbox",id:"reveal-field-checkbox",class:"checkbox","onUpdate:modelValue":n[2]||(n[2]=a=>v(e).fieldVisible=a)},null,512),[[V,v(e).fieldVisible]]),t("label",Ye,A(s.$t("as.show_field")),1)]),t("div",je,[U(t("input",{type:"checkbox",id:"reveal-field-discord-checkbox",class:"checkbox","onUpdate:modelValue":n[3]||(n[3]=a=>v(e).noSpoilers=a)},null,512),[[V,v(e).noSpoilers]]),t("label",He,[k(A(s.$t("as.no_spoilers.primary")),1),n[5]||(n[5]=t("br",null,null,-1)),t("span",ze,A(s.$t("as.no_spoilers.secondary")),1)])]),n[6]||(n[6]=t("br",null,null,-1))])])]))}},te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAGBJREFUKFOdktEOACAERfn/j9ZSzISUh9rqHnSFkAcBAEbX4eEWtiARzd3HTK5JfKUIkASqtRADRItDzJ/zDVUthd4elYoRcNe6GIsvzAmxDwWVuifzeJqTFbd+hM+eQgN+yBcNCrE2mAAAAABJRU5ErkJggg==",We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAYAAACJxx+AAAAAAXNSR0IArs4c6QAAADtJREFUKFNjZEAC/xkY/oO4jGAEAWAGTAJJEKEAXZJ0E4hyA7IiiJPQHEmsArAXkQDYJyACXQJDFV4FALILDwkMl1fVAAAAAElFTkSuQmCC",Xe={key:0,class:"cell-content"},Pe={key:1,class:"cell-img",src:te},Ze={key:1,class:"cell-img pixel-art",src:We},qe=N({__name:"Cell",props:{revealed:{type:Boolean},value:{}},setup(o){const e=o,s=y(e.revealed),n=y(!1),a=y(!1),r=S(()=>e.value===-1),f=S(()=>e.value>0?e.value:0),l=S(()=>`var(--color-num-${f.value})`);function i(m){m.shiftKey&&!s.value?n.value=!n.value:n.value||(s.value=!0)}function c(m){m.key==="Shift"&&(a.value=!0)}function _(m){m.key==="Shift"&&(a.value=!1)}return J(()=>{window.addEventListener("keydown",c),window.addEventListener("keyup",_)}),H(()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",_)}),(m,u)=>(g(),h("button",{class:Z(["cell game-cell",{"cell-button":!s.value&&!n.value&&!a.value,"cell-revealed":s.value}]),onClick:i},[s.value?(g(),h("div",Xe,[!r.value&&f.value>0?(g(),h("p",{key:0,style:L({color:l.value})},A(f.value),5)):r.value?(g(),h("img",Pe)):E("",!0)])):E("",!0),n.value?(g(),h("img",Ze)):E("",!0)],2))}}),el=I(qe,[["__scopeId","data-v-48de3045"]]),ll={class:"cell-content"},tl={key:0,class:"inner-cell"},nl={__name:"CellDiscord",props:{x:Number,y:Number},setup(o){const e=o,s=T(),n=O(),a=S(()=>s.field[e.y][e.x]),r=S(()=>a.value===-1),f=S(()=>`var(--color-num-${a.value})`),l=y(!1),i=y(!1);function c(m){l.value=m,m||(i.value=!1)}J(()=>{const m=()=>c(!0),u=()=>c(!1);window.addEventListener("mousedown",m),window.addEventListener("mouseup",u),window._mouseDownHandler=m,window._mouseUpHandler=u}),ie(()=>{window.removeEventListener("mousedown",window._mouseDownHandler),window.removeEventListener("mouseup",window._mouseUpHandler)});function _(m){(l.value&&!i.value&&n.drawingMode||m)&&(s.toggleMine(e.x,e.y),i.value=!0)}return(m,u)=>{const p=ae("motion-pop");return g(),h("button",{onClick:u[0]||(u[0]=()=>_(!0)),class:"game-cell",onMousemove:u[1]||(u[1]=()=>_(!1)),onMouseleave:u[2]||(u[2]=()=>i.value=!1)},[t("div",ll,[v(n).fieldVisible?U((g(),h("div",tl,[!r.value&&a.value>0?(g(),h("p",{key:`num-${o.x}-${o.y}`,style:L({color:f.value})},A(a.value),5)):r.value?(g(),h("img",{key:`mine-${o.x}-${o.y}`,class:"cell-img pixel-art",src:te,alt:"Mina"})):E("",!0)])),[[p]]):U((g(),h("p",{key:`hidden-${o.x}-${o.y}`,class:"hidden-count"},u[3]||(u[3]=[k(" ? ")]))),[[p]])])],32)}}},ol=I(nl,[["__scopeId","data-v-94aa6a98"]]),sl={key:0,class:"cell",style:{width:"min-content"}},il={class:"field"},al={__name:"Minesweeper",props:{editorMode:Boolean},setup(o){const e=T();return J(e.reloadField),z(()=>[e.width,e.height,e.mines],()=>e.reloadField()),(s,n)=>v(e).field.length?(g(),h("div",sl,[t("div",il,[(g(!0),h(Y,null,j(v(e).field,(a,r)=>(g(),h("div",{class:"flex",key:r},[(g(!0),h(Y,null,j(a,(f,l)=>(g(),h("div",{key:l},[o.editorMode?(g(),X(ol,{key:0,revealed:!0,value:f,x:l,y:r},null,8,["value","x","y"])):(g(),X(el,{key:1,revealed:!1,value:f,x:l,y:r,onReloadField:s.toggleMine},null,8,["value","x","y","onReloadField"]))]))),128))]))),128))])])):E("",!0)}},ul={class:"flex",style:{flex:"1 1 0",height:"100%","justify-content":"space-between"}},rl={class:"flex-column"},dl={class:"flex",style:{flex:"1 1 0","justify-content":"center","align-items":"center"}},cl=N({__name:"DiscordView",setup(o){const e=T(),s=le(),n=O(),a=y({0:":zero:",1:":one:",2:":two:",3:":three:",4:":four:",5:":five:",6:":six:",7:":seven:",8:":eight:","-1":":boom:"});function r(){navigator.clipboard.writeText("");const f=ue();var l=e.field,i="";n.additionalText&&(i+=`* ${D.global.t("field.size")}: ${e.width}x${e.height}
* ${D.global.t("field.mines")}: ${e.mines}
`,n.noSpoilers||(i+=`**${D.global.t("field.corners")}**
`)),l.forEach(c=>{c.forEach(_=>{var m=`${a.value[_.toString()]}`;n.noSpoilers||(m=`||${m}||`),i+=m}),i+=`
`}),i=i.slice(0,-1),navigator.clipboard.writeText(i),f.success(D.global.t("toasts.copied"))}return z(()=>[e.width,e.height],()=>{e.mines=Math.min(e.mines,e.height*e.width)}),(f,l)=>(g(),h("div",ul,[t("div",rl,[x(B,{class:"cell cell-button DS-UI","hold-delay":v(s).noAcceleration.holdDelay,acceleration:v(s).noAcceleration.acceleration,"initial-interval":v(s).noAcceleration.initialInterval,onClick:l[0]||(l[0]=i=>v(e).reloadField())},{default:C(()=>l[3]||(l[3]=[t("img",{class:"pixel-art",src:re},null,-1)])),_:1},8,["hold-delay","acceleration","initial-interval"]),t("button",{class:"cell cell-button DS-UI",onClick:l[1]||(l[1]=i=>v(e).mines=0)},l[4]||(l[4]=[t("img",{class:"pixel-art",src:de},null,-1)])),t("button",{class:"cell cell-button DS-UI",onClick:l[2]||(l[2]=i=>r())},l[5]||(l[5]=[t("img",{src:q,class:"pixel-art"},null,-1)]))]),t("div",dl,[x(al,{"editor-mode":!0})]),x(ve,{class:"flex-column",style:{"align-items":"end",width:"5.3rem"}},{default:C(()=>[x(G,{class:"flex flex-column tab"},{button:C(()=>l[6]||(l[6]=[t("img",{src:ce,class:"pixel-art"},null,-1)])),content:C(()=>[x(ye)]),_:1}),x(G,{class:"flex flex-column tab",open:!1},{button:C(()=>l[7]||(l[7]=[t("img",{src:Ae,class:"pixel-art"},null,-1)])),content:C(()=>[x(Ve)]),_:1}),x(G,{class:"flex flex-column tab",open:!0},{button:C(()=>l[8]||(l[8]=[t("img",{src:ee,class:"pixel-art"},null,-1)])),content:C(()=>[x(Le)]),_:1})]),_:1})]))}}),vl=I(cl,[["__scopeId","data-v-4af9541c"]]);export{vl as default};
